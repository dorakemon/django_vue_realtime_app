(function(t){function e(e){for(var s,r,i=e[0],u=e[1],c=e[2],p=0,d=[];p<i.length;p++)r=i[p],Object.prototype.hasOwnProperty.call(a,r)&&a[r]&&d.push(a[r][0]),a[r]=0;for(s in u)Object.prototype.hasOwnProperty.call(u,s)&&(t[s]=u[s]);l&&l(e);while(d.length)d.shift()();return o.push.apply(o,c||[]),n()}function n(){for(var t,e=0;e<o.length;e++){for(var n=o[e],s=!0,i=1;i<n.length;i++){var u=n[i];0!==a[u]&&(s=!1)}s&&(o.splice(e--,1),t=r(r.s=n[0]))}return t}var s={},a={app:0},o=[];function r(e){if(s[e])return s[e].exports;var n=s[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=t,r.c=s,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)r.d(n,s,function(e){return t[e]}.bind(null,s));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],u=i.push.bind(i);i.push=e,i=i.slice();for(var c=0;c<i.length;c++)e(i[c]);var l=u;o.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},1:function(t,e){},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var s=n("2b0e"),a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("div",{staticClass:"container"},[n("div",{staticClass:"row"},[n("div",{staticClass:"col-md-6 offset-md-3"},[n("router-view")],1)])])])},o=[],r={name:"app",components:{}},i=r,u=n("2877"),c=Object(u["a"])(i,a,o,!1,null,null,null),l=c.exports,p=(n("45fc"),n("8c4f")),d=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"home"},[n("Chat")],1)},m=[],f=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"card mt-3"},[n("div",{staticClass:"card-body"},[t._m(0),n("div",{staticClass:"card-body"},[t._l(t.test,(function(e,s){return n("div",{key:s,staticClass:"test"},[n("p",[n("span",{staticClass:"font-weight-bold"},[t._v(t._s(e.username)+": ")]),t._v(t._s(e.content))])])})),t._l(t.messages,(function(e,s){return n("div",{key:s,staticClass:"messages"},[n("p",[n("span",{staticClass:"font-weight-bold"},[t._v(t._s(e.user)+": ")]),t._v(t._s(e.message))])])}))],2)]),n("div",{staticClass:"card-footer"},[n("form",{on:{submit:function(e){return e.preventDefault(),t.sendMessage(e)}}},[n("div",{staticClass:"gorm-group"},[n("label",{attrs:{for:"user"}},[t._v("User:")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.user,expression:"user"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.user},on:{input:function(e){e.target.composing||(t.user=e.target.value)}}})]),n("div",{staticClass:"gorm-group pb-3"},[n("label",{attrs:{for:"message"}},[t._v("Message:")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.message,expression:"message"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.message},on:{input:function(e){e.target.composing||(t.message=e.target.value)}}})]),n("button",{staticClass:"btn btn-success",attrs:{type:"submit"}},[t._v("Send")])])])])},v=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"card-title"},[n("h3",[t._v("Todo Group")]),n("hr")])}],g=(n("99af"),n("fb6a"),n("2909")),h=n("8055"),b=n.n(h),_=n("bc3a"),w=n.n(_),y={name:"Chat",data:function(){return{user:"",message:"",messages:[],socket:b()("localhost:3001"),test:""}},methods:{sendMessage:function(t){t.preventDefault(),this.socket.emit("SEND_MESSAGE",{user:this.user,message:this.message}),this.message=""}},mounted:function(){var t=this;this.socket.on("MESSAGE",(function(e){t.messages=[].concat(Object(g["a"])(t.messages),[e])})),w.a.get("http://localhost:8000/api/todo/",{headers:{"Content-Type":"application/json",Authorization:"JWT ".concat(localStorage.getItem("jwt").slice(1).slice(0,-1))},data:{}}).then((function(e){t.test=e.data}))}},C=y,j=Object(u["a"])(C,f,v,!1,null,null,null),x=j.exports,O={name:"Home",components:{Chat:x}},S=O,k=Object(u["a"])(S,d,m,!1,null,null,null),T=k.exports,E=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},I=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"about"},[n("h1",[t._v("This is an about page")])])}],P={},M=Object(u["a"])(P,E,I,!1,null,null,null),$=M.exports,A=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("h2",[t._v("ログイン")]),n("form",{on:{submit:function(e){return e.preventDefault(),t.login(e)}}},[n("div",{staticClass:"username"},[n("label",{attrs:{for:"username"}},[t._v("ユーザーネーム")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.username,expression:"username"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.username},on:{input:function(e){e.target.composing||(t.username=e.target.value)}}})]),n("div",{staticClass:"password pb-3"},[n("label",{attrs:{for:"password"}},[t._v("パスワード")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"form-control",attrs:{type:"password"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}})]),n("button",{staticClass:"btn btn-success",attrs:{type:"submit"}},[t._v("ログイン")])])])},N=[],D={name:"Login",data:function(){return{username:"",password:""}},methods:{login:function(){this.$store.dispatch("login",{username:this.username,password:this.password})}}},J=D,L=Object(u["a"])(J,A,N,!1,null,"659eb78c",null),q=L.exports,G=n("2f62"),H=w.a.create({baseURL:"http://localhost:8000/api/auth/"}),U=H;s["a"].use(G["a"]);var z=new G["a"].Store({state:{idToken:"",loggedIn:!1},getters:{idToken:function(t){return t.idToken},loggedIn:function(t){return t.loggedIn}},mutations:{storeIdToken:function(t,e){t.idToken=e,localStorage.setItem("jwt",JSON.stringify(e)),t.loggedIn=!0},clear:function(t){t.idToken="",t.idLoggedIn=!1}},actions:{login:function(t,e){var n=t.commit;U.post("jwt/create/",{username:e.username,password:e.password}).then((function(t){n("storeIdToken",t.data.access),F.push("/")}))},logout:function(t){var e=t.commit;localStorage.removeItem("jwt"),e("clear")},reload:function(t){return U.get("users/me/").then((function(e){var n=e.data;return t.commit("set",{user:n}),n}))}}});s["a"].use(p["a"]);var R=[{path:"/",name:"Home",component:T,meta:{requiresAuth:!0}},{path:"/about/",name:"About",component:$},{path:"/login/",name:"Login",component:q},{path:"*",redirect:"/"}],W=new p["a"]({mode:"history",base:"/",routes:R});function B(t,e,n){n({path:"/login",query:{next:t.fullPath}})}W.beforeEach((function(t,e,n){var s=z.getters.loggedIn,a=localStorage.getItem("jwt");t.matched.some((function(t){return t.meta.requiresAuth}))?s?n():null!=a?z.dispatch("reload").then((function(){n()})).catch((function(){B(t,e,n)})):B(t,e,n):n()}));var F=W;s["a"].config.productionTip=!1,new s["a"]({router:F,store:z,render:function(t){return t(l)}}).$mount("#app")}});
//# sourceMappingURL=app.8fa45cbc.js.map